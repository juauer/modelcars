<?xml version="1.0"?>
<launch>
  <!-- arg <bagfile>: filename of a bag in catkin_ws/../logs/ -->
  <arg name="bagfile" default="test" />
  
  <!-- arg <calib>: filename of a camera calibration file in catkin_ws/src/camera_matrix/config/ -->
  <arg name="calib" default="test" />
  
  <!-- arg <m_mapfile>: filename of a map image in catkin_ws/../captures/ -->
  <arg name="m_mapfile" default="map_test.png" />
  
  <!-- arg <pf_particles_num>: Number of particles -->
  <arg name="pf_particles_num" default="100" />
  
  <!-- arg <pf_particles_keep_percent>: Percent of particles to keep. The rest is resampled randomly -->
  <arg name="pf_particles_keep_percent" default="0.75" />
  
  <!-- arg <pf_particle_stddev>: Standard deviation (in px) of distribution which is used to resample near a kept particle. -->
  <arg name="pf_particle_stddev" default="5" />
  
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(find test)/config/config.rviz" />
    
  <include file="$(find camera_matrix)/launch/camera_matrix_publisher.launch" >
    <arg name="calib" value="$(arg calib)" />
  </include>
  
  <include file="$(find camera_matrix)/launch/undistorted_image_publisher.launch" />
  
  <include file="$(find cps2)/launch/localization_publisher_debug.launch" >
    <arg name="mapfile" value="$(arg m_mapfile)" />
    <arg name="particles_num" value="$(arg pf_particles_num)" />
    <arg name="particles_keep_percent" value="$(arg pf_particles_keep_percent)" />
    <arg name="particle_stddev" value="$(arg pf_particle_stddev)" />
  </include>
  
  <include file="$(find logging)/launch/log_player.launch" >
    <arg name="filename" value="$(arg bagfile)" />
  </include>
</launch>
